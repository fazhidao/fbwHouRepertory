(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00b5089e"],{"7bfd":function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"container"},[e("div",{staticClass:"search_bar"},[e("el-input",{staticClass:"main_input",attrs:{placeholder:"输入名称或手机号搜索",clearable:""},model:{value:t.main_input.text,callback:function(i){t.$set(t.main_input,"text",i)},expression:"main_input.text"}}),e("el-select",{staticStyle:{width:"120px","margin-right":"6px"},attrs:{filterable:"",clearable:"",placeholder:"用户类别"},model:{value:t.main_input.user_class,callback:function(i){t.$set(t.main_input,"user_class",i)},expression:"main_input.user_class"}},t._l(t.class_list,function(t){return e("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1),e("el-select",{staticStyle:{width:"120px","margin-right":"6px"},attrs:{filterable:"",clearable:"",placeholder:"vip等级"},model:{value:t.main_input.vip_id,callback:function(i){t.$set(t.main_input,"vip_id",i)},expression:"main_input.vip_id"}},t._l(t.vip_list,function(t){return e("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1),e("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:function(i){t.getTableData()}}},[t._v("搜 索")]),e("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[e("el-breadcrumb-item",{attrs:{to:{path:"/index"}}},[t._v("首页")]),e("el-breadcrumb-item",[t._v("用户数据管理")]),e("el-breadcrumb-item",[t._v("用户列表")])],1)],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.is_loading,expression:"is_loading"}],staticStyle:{width:"100%"},attrs:{height:t.table_height,data:t.table_data,border:""}},[e("el-table-column",{attrs:{type:"index",width:"45",align:"center"}}),e("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(i){return[0==i.row.status?e("el-tag",{attrs:{type:"info"}},[t._v("待审核")]):t._e(),1==i.row.status?e("el-tag",{attrs:{type:"danger"}},[t._v("审核失败")]):t._e(),2==i.row.status?e("el-tag",{attrs:{type:"success"}},[t._v("审核通过")]):t._e(),3==i.row.status?e("el-tag",{attrs:{type:"danger"}},[t._v("禁用")]):t._e()]}}])}),e("el-table-column",{attrs:{prop:"name",label:"类别"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",[t._v(t._s(t.class_list[i.row.user_class].title))])]}}])}),e("el-table-column",{attrs:{prop:"name",label:"名称"}}),e("el-table-column",{attrs:{prop:"phone",label:"手机"}}),e("el-table-column",{attrs:{prop:"vip_name",label:"vip等级"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{type:"text"},on:{click:function(e){t.showChangeVip(i.row)}}},[t._v(t._s(i.row.vip_name))])]}}])}),e("el-table-column",{attrs:{prop:"create_time",label:"注册时间"}}),e("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{type:"text"},on:{click:function(e){t.showDetail(i.row)}}},[t._v("详情")]),0==i.row.status?e("el-button",{attrs:{type:"text"},on:{click:function(e){t.submitAprove(i.row)}}},[t._v("审核通过")]):t._e(),2==i.row.status?e("el-button",{attrs:{type:"text"},on:{click:function(e){t.submitForbid(i.row)}}},[t._v("禁用")]):t._e(),3==i.row.status?e("el-button",{attrs:{type:"text"},on:{click:function(e){t.submitCancelForbid(i.row)}}},[t._v("启用")]):t._e(),e("el-button",{attrs:{type:"text"},on:{click:function(e){t.getOrders(i.row.id)}}},[t._v("查看消费记录")])]}}])})],1),e("el-pagination",{staticStyle:{"text-align":"center"},attrs:{"current-page":t.page.current_page,"page-sizes":[50],"page-size":t.page.size,layout:"total,sizes, prev, pager, next, jumper",total:t.page.total},on:{"current-change":t.handleCurrentChange}}),e("el-dialog",{attrs:{title:"用户详情",visible:t.is_show_user_info,width:"700px"},on:{"update:visible":function(i){t.is_show_user_info=i}}},[e("div",{staticClass:"list_row"},[e("div",{staticClass:"list_row_left"},[t._v("用户名称")]),e("div",{staticClass:"list_row_right"},[t._v(t._s(t.user_info.name))])]),e("div",{staticClass:"list_row"},[e("div",{staticClass:"list_row_left"},[t._v("手机")]),e("div",{staticClass:"list_row_right"},[t._v(t._s(t.user_info.phone))])]),e("div",{staticClass:"list_row"},[e("div",{staticClass:"list_row_left"},[t._v("头像")]),e("div",{staticClass:"list_row_right"},[e("img",{staticStyle:{height:"80px"},attrs:{src:t.ImgUrl+t.user_info.avatar,alt:""}})])]),e("div",{staticClass:"list_row"},[e("div",{staticClass:"list_row_left"},[t._v("性别")]),e("div",{staticClass:"list_row_right"},[t._v(t._s(0==t.user_info.gender?"男":"女"))])]),e("div",{staticClass:"list_row"},[e("div",{staticClass:"list_row_left"},[t._v("所在地")]),e("div",{staticClass:"list_row_right"},[t._v(t._s(t.user_info.province_name+t.user_info.city_name+(t.user_info.district_name||"")+" "+(t.user_info.address||"")))])]),e("div",{staticClass:"list_row"},[e("div",{staticClass:"list_row_left"},[t._v("代理商")]),e("div",{staticClass:"list_row_right"},[t._v(t._s(t.user_info.agency_name))])]),e("div",{staticClass:"list_row"},[e("div",{staticClass:"list_row_left"},[t._v("剩余积分")]),e("div",{staticClass:"list_row_right"},[t._v(t._s(t.user_info.credit))])]),t.user_info.other_info?e("div",{staticClass:"list_row"},[e("div",{staticClass:"list_row_left"},[t._v("额外信息")]),e("div",{staticClass:"list_row_right"},[t.user_info.other_info.good_at?e("div",[t._v("擅长领域："+t._s(t.user_info.other_info.good_at))]):t._e(),t.user_info.other_info.years?e("div",[t._v("从业年数："+t._s(t.user_info.other_info.years))]):t._e(),t.user_info.other_info.scale?e("div",[t._v("企业规模："+t._s(t.user_info.other_info.scale))]):t._e(),t.user_info.other_info.license?e("div",[t._v("执照："),e("a",{attrs:{href:t.ImgUrl+t.user_info.other_info.license,target:"_blank"}},[t._v("点击下载")])]):t._e()])]):t._e(),e("div",{staticClass:"list_row"},[e("div",{staticClass:"list_row_left"},[t._v("消费总额")]),e("div",{staticClass:"list_row_right"},[t._v(t._s(t.user_info.total_consume))])]),e("div",{staticClass:"list_row"},[e("div",{staticClass:"list_row_left"},[t._v("管理员备注")]),e("div",{staticClass:"list_row_right"},[t._v(t._s(t.user_info.note))])]),e("div",{staticClass:"list_row"},[e("div",{staticClass:"list_row_left"},[t._v("注册时间")]),e("div",{staticClass:"list_row_right"},[t._v(t._s(t.user_info.create_time))])]),e("div",{staticClass:"list_row"},[e("div",{staticClass:"list_row_left"},[t._v("上次登录时间")]),e("div",{staticClass:"list_row_right"},[t._v(t._s(t.user_info.last_login_time))])])]),e("el-dialog",{attrs:{title:"消费列表",visible:t.is_show_consume,width:"600px"},on:{"update:visible":function(i){t.is_show_consume=i}}},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.order_list}},[e("el-table-column",{attrs:{type:"index",width:"45",align:"center"}}),e("el-table-column",{attrs:{label:"是否付款"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",[t._v(t._s(1==i.row.status?"已付款":"未付款"))])]}}])}),e("el-table-column",{attrs:{prop:"subject",label:"消费内容"}}),e("el-table-column",{attrs:{label:"消费金额"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",[t._v("￥"+t._s(i.row.pay_amount/100))])]}}])}),e("el-table-column",{attrs:{prop:"pay_time",label:"付款时间"}})],1)],1),e("el-dialog",{attrs:{title:"变更VIP套餐",visible:t.is_show_change_vip,width:"600px"},on:{"update:visible":function(i){t.is_show_change_vip=i}}},[e("el-select",{attrs:{"value-key":"id",placeholder:"vip等级"},model:{value:t.chosed_vip,callback:function(i){t.chosed_vip=i},expression:"chosed_vip"}},t._l(t.vip_list,function(t){return e("el-option",{attrs:{label:t.title,value:t}})}),1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(i){t.is_show_add=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(i){t.submitChangeVip()}}},[t._v("确 定")])],1)],1)],1)},a=[],n=(e("7f7f"),e("cadf"),e("551c"),e("097d"),{data:function(){return{is_loading:!1,is_show_user_info:!1,is_show_edit:!1,is_show_consume:!1,is_show_change_vip:!1,main_input:{text:"",user_class:"",vip_id:""},class_list:[{id:0,title:"未认证"},{id:1,title:"个人"},{id:2,title:"企业"},{id:3,title:"律师"},{id:4,title:"律所"}],vip_list:[],table_height:100,table_data:[],page:{current_page:1,size:50},user_info:{},order_list:[],chosed_vip:""}},created:function(){this.table_height=window.innerHeight-150,this.getTableData(),this.getVipList()},methods:{getVipList:function(){var t=this;this.requestApi({url:"vip_plans/get",success:function(i){t.vip_list=i}})},getTableData:function(){var t=this;this.is_loading=!0;var i={page:this.page.current_page,page_size:this.page.size};""!=this.main_input.text&&(this.main_input.text>1?i.phone=this.main_input.text:i.name=this.main_input.text),""!==this.main_input.user_class&&(i.user_class=this.main_input.user_class),""!=this.main_input.vip_id&&(i.vip_id=this.main_input.vip_id),this.requestApi({url:"users/get",data:i,success:function(i){t.table_data=i.data,t.page.total=parseInt(i.total),t.is_loading=!1}})},getUserData:function(t){var i=this;this.requestApi({url:"users/getSingle",data:{id:t},success:function(t){i.user_info=t,i.user_info.other_info=JSON.parse(t.other_info)}})},getOrders:function(t){var i=this;this.requestApi({url:"orders/getList",data:{user_id:t},success:function(t){i.order_list=t,i.is_show_consume=!0}})},handleCurrentChange:function(t){this.page.current_page=t,this.getTableData()},showDetail:function(t){this.getUserData(t.id),this.is_show_user_info=!0},submitAprove:function(t){var i=this;this.$confirm("确定审核通过 "+t.name+"?","再次确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.requestApi({url:"users/approve",data:{id:t.id},success:function(){i.$message.success("操作成功"),i.getTableData()}})}).catch(function(){})},submitForbid:function(t){var i=this;this.$confirm("确定禁用 "+t.name+"?","再次确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.requestApi({url:"users/forbid",data:{id:t.id},success:function(){i.$message.success("操作成功"),i.getTableData()}})}).catch(function(){})},submitCancelForbid:function(t){var i=this;this.$confirm("确定启用 "+t.name+"?","再次确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.requestApi({url:"users/cancel_forbid",data:{id:t.id},success:function(){i.$message.success("操作成功"),i.getTableData()}})}).catch(function(){})},showChangeVip:function(t){this.chosed_user=t,this.is_show_change_vip=!0},submitChangeVip:function(){var t=this;this.requestApi({url:"users/setVip",data:{id:this.chosed_user.id,vip_id:this.chosed_vip.id},success:function(i){t.chosed_user.vip_name=t.chosed_vip.title,t.$message.success("操作成功"),t.is_show_change_vip=!1}})}}}),l=n,r=e("2877"),o=Object(r["a"])(l,s,a,!1,null,null,null);o.options.__file="users.vue";i["default"]=o.exports},"7f7f":function(t,i,e){var s=e("86cc").f,a=Function.prototype,n=/^\s*function ([^ (]*)/,l="name";l in a||e("9e1e")&&s(a,l,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(t){return""}}})}}]);